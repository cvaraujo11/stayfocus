# Estrutura Completa do Banco de Dados - StayFocus

**Data de Gera√ß√£o:** 19 de Outubro de 2025  
**Projeto:** StayFocus (llwcibvofptjyxxrcbvu)  
**Regi√£o:** us-east-2  
**Vers√£o PostgreSQL:** 17.6.1.021

---

## √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Schemas](#schemas)
3. [Extens√µes Instaladas](#extens√µes-instaladas)
4. [Tabelas por M√≥dulo](#tabelas-por-m√≥dulo)
5. [Relacionamentos](#relacionamentos)
6. [Pol√≠ticas RLS](#pol√≠ticas-rls)

---

## Vis√£o Geral

O banco de dados StayFocus √© estruturado para gerenciar m√∫ltiplos aspectos da vida de usu√°rios com TDAH, incluindo:

- **Perfil e Prefer√™ncias**: Configura√ß√µes pessoais e visuais
- **Finan√ßas**: Categorias, transa√ß√µes, envelopes e pagamentos recorrentes
- **Alimenta√ß√£o**: Refei√ß√µes, planejamento, hidrata√ß√£o
- **Sa√∫de**: Medicamentos, tomadas, registros de humor
- **Sono**: Registros de qualidade do sono
- **Estudos**: Concursos, quest√µes, simulados
- **Hiperfocos**: Gerenciamento de per√≠odos de hiperfoco e tarefas
- **Produtividade**: Pomodoro, prioridades, blocos de tempo
- **Lazer**: Atividades sociais e de lazer
- **Receitas**: Receitas culin√°rias e lista de compras

---

## Schemas

### 1. **auth** (Supabase Auth)
Gerencia autentica√ß√£o e autoriza√ß√£o de usu√°rios.

**Tabelas principais:**
- `users` - 2 usu√°rios cadastrados
- `sessions` - 7 sess√µes ativas
- `identities` - 2 identidades
- `refresh_tokens` - 7 tokens

### 2. **storage** (Supabase Storage)
Gerencia armazenamento de arquivos.

**Tabelas principais:**
- `buckets` - 1 bucket configurado
- `objects` - 0 objetos armazenados

### 3. **public** (Aplica√ß√£o)
Schema principal da aplica√ß√£o com todas as tabelas de neg√≥cio.

---

## Extens√µes Instaladas

| Extens√£o | Vers√£o | Schema | Descri√ß√£o |
|----------|--------|--------|-----------|
| `pg_graphql` | 1.5.11 | graphql | Suporte GraphQL |
| `supabase_vault` | 0.3.1 | vault | Vault do Supabase |
| `pgcrypto` | 1.3 | extensions | Fun√ß√µes criptogr√°ficas |
| `pg_stat_statements` | 1.11 | extensions | Estat√≠sticas de queries |
| `uuid-ossp` | 1.1 | extensions | Gera√ß√£o de UUIDs |
| `plpgsql` | 1.0 | pg_catalog | Linguagem procedural |

**Extens√µes dispon√≠veis mas n√£o instaladas:** 68 extens√µes adicionais dispon√≠veis para instala√ß√£o.

---

## Tabelas por M√≥dulo

### üìä M√≥dulo: Perfil e Configura√ß√µes

#### `users_profile`
Perfil b√°sico do usu√°rio.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users (UNIQUE) |
| nome | text | Nome do usu√°rio (padr√£o: 'Usu√°rio') |
| notificacoes_ativas | boolean | Notifica√ß√µes ativas (padr√£o: true) |
| pausas_ativas | boolean | Pausas ativas (padr√£o: true) |
| created_at | timestamptz | Data de cria√ß√£o |
| updated_at | timestamptz | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

#### `preferencias_visuais`
Prefer√™ncias de acessibilidade visual.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users (UNIQUE) |
| alto_contraste | boolean | Alto contraste (padr√£o: false) |
| reducao_estimulos | boolean | Redu√ß√£o de est√≠mulos (padr√£o: false) |
| texto_grande | boolean | Texto grande (padr√£o: false) |
| updated_at | timestamptz | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

#### `metas_diarias`
Metas di√°rias personalizadas do usu√°rio.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users (UNIQUE) | |
| horas_sono | integer | 1-24 (padr√£o: 8) | Meta de horas de sono |
| tarefas_prioritarias | integer | 1-20 (padr√£o: 3) | Meta de tarefas priorit√°rias |
| copos_agua | integer | 1-30 (padr√£o: 8) | Meta de copos de √°gua |
| pausas_programadas | integer | 0-20 (padr√£o: 4) | Meta de pausas |
| updated_at | timestamptz | | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

### üí∞ M√≥dulo: Finan√ßas

#### `financas_categorias`
Categorias personalizadas para transa√ß√µes financeiras.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| nome | text | Nome da categoria |
| cor | text | Cor em hexadecimal |
| icone | text | Nome do √≠cone |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 16

---

#### `financas_transacoes`
Registro de receitas e despesas.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data da transa√ß√£o |
| valor | numeric | | Valor da transa√ß√£o |
| descricao | text | | Descri√ß√£o |
| categoria_id | uuid | FK ‚Üí financas_categorias (nullable) | |
| tipo | text | 'receita' ou 'despesa' | Tipo de transa√ß√£o |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 2

---

#### `financas_envelopes`
Sistema de envelopes para or√ßamento.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| nome | text | | Nome do envelope |
| cor | text | | Cor em hexadecimal |
| valor_alocado | numeric | >= 0 | Valor alocado |
| valor_utilizado | numeric | >= 0 (padr√£o: 0) | Valor j√° utilizado |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

#### `financas_pagamentos_recorrentes`
Pagamentos que se repetem mensalmente.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| descricao | text | Descri√ß√£o do pagamento |
| valor | numeric | Valor |
| data_vencimento | text | Dia do vencimento |
| categoria_id | uuid | FK ‚Üí financas_categorias (nullable) |
| proximo_pagamento | date | Data do pr√≥ximo pagamento |
| pago | boolean | Status de pagamento (padr√£o: false) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

### üçΩÔ∏è M√≥dulo: Alimenta√ß√£o

#### `alimentacao_refeicoes`
Registro de refei√ß√µes realizadas.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| data | date | Data da refei√ß√£o |
| hora | time | Hora da refei√ß√£o |
| descricao | text | Descri√ß√£o do que foi consumido |
| foto_url | text | URL da foto (nullable) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 2

---

#### `alimentacao_planejamento`
Planejamento de refei√ß√µes por dia da semana.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| horario | text | | Hor√°rio da refei√ß√£o |
| descricao | text | | Descri√ß√£o/nome da refei√ß√£o |
| dia_semana | integer | 0-6 (nullable) | 0=Dom, 1=Seg... NULL=Todos |
| ativo | boolean | padr√£o: true | Se est√° ativo |
| ordem | integer | padr√£o: 0 | Ordem de exibi√ß√£o |
| created_at | timestamptz | | Data de cria√ß√£o |
| updated_at | timestamptz | | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

#### `alimentacao_hidratacao`
Registro di√°rio de consumo de √°gua.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | padr√£o: CURRENT_DATE | Data do registro |
| copos_bebidos | integer | 0-50 (padr√£o: 0) | Copos bebidos |
| meta_diaria | integer | 1-20 (padr√£o: 8) | Meta do dia |
| ultimo_registro | timestamptz | nullable | Timestamp do √∫ltimo copo |
| notas | text | nullable | Observa√ß√µes |
| created_at | timestamptz | | Data de cria√ß√£o |
| updated_at | timestamptz | | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

### üè• M√≥dulo: Sa√∫de

#### `saude_medicamentos`
Cadastro de medicamentos do usu√°rio.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| nome | varchar | | Nome do medicamento |
| dosagem | varchar | nullable | Dosagem (ex: 10mg) |
| frequencia | varchar | padr√£o: 'Di√°ria' | Di√°ria/Semanal/Mensal/Conforme necess√°rio |
| horarios | text[] | array_length > 0 | Array de hor√°rios (HH:MM) |
| observacoes | text | nullable | Observa√ß√µes |
| data_inicio | date | padr√£o: CURRENT_DATE | Data de in√≠cio |
| intervalo_minutos | integer | > 0 (padr√£o: 240) | Intervalo m√≠nimo entre doses |
| ativo | boolean | padr√£o: true | Se est√° em uso |
| created_at | timestamptz | | Data de cria√ß√£o |
| updated_at | timestamptz | | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

#### `saude_tomadas_medicamentos`
Hist√≥rico de tomadas de medicamentos.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| medicamento_id | uuid | FK ‚Üí saude_medicamentos |
| user_id | uuid | FK ‚Üí auth.users |
| data_hora | timestamptz | Quando foi tomado (padr√£o: now()) |
| horario_programado | time | Hor√°rio que estava programado (nullable) |
| observacoes | text | Observa√ß√µes (nullable) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 3

---

#### `saude_registros_humor`
Monitoramento di√°rio de humor.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data do registro |
| nivel | integer | 1-5 | 1=muito ruim, 5=muito bom |
| fatores | text[] | padr√£o: '{}' | Fatores que influenciaram |
| notas | text | nullable | Observa√ß√µes |
| created_at | timestamptz | | Data de cria√ß√£o |
| updated_at | timestamptz | | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

### üò¥ M√≥dulo: Sono

#### `sono_registros`
Registro de qualidade do sono.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data do registro |
| hora_dormir | time | nullable | Hora que dormiu |
| hora_acordar | time | nullable | Hora que acordou |
| qualidade | integer | 1-5 (nullable) | Qualidade do sono |
| observacoes | text | nullable | Observa√ß√µes |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

### üìö M√≥dulo: Estudos

#### `estudos_concursos`
Concursos que o usu√°rio est√° estudando.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| nome | text | | Nome do concurso |
| data_prova | date | nullable | Data da prova |
| instituicao | text | nullable | Institui√ß√£o |
| cargo | text | nullable | Cargo |
| disciplinas | text[] | nullable | Disciplinas |
| status | text | padr√£o: 'em_andamento' | em_andamento/concluido/cancelado |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

#### `estudos_questoes`
Banco de quest√µes para estudo.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| concurso_id | uuid | FK ‚Üí estudos_concursos (nullable) |
| disciplina | text | Disciplina |
| enunciado | text | Enunciado da quest√£o |
| alternativas | jsonb | Alternativas em JSON |
| resposta_correta | text | Resposta correta |
| explicacao | text | Explica√ß√£o (nullable) |
| tags | text[] | Tags (nullable) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

#### `estudos_simulados`
Simulados realizados.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| concurso_id | uuid | FK ‚Üí estudos_concursos (nullable) |
| titulo | text | T√≠tulo do simulado |
| questoes_ids | uuid[] | IDs das quest√µes (nullable) |
| data_realizacao | timestamptz | Data de realiza√ß√£o (nullable) |
| tempo_limite_minutos | integer | Tempo limite (nullable) |
| acertos | integer | N√∫mero de acertos (nullable) |
| total_questoes | integer | Total de quest√µes (nullable) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

#### `estudos_registros`
Registro de sess√µes de estudo.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data do estudo |
| disciplina | text | | Disciplina estudada |
| duracao_minutos | integer | > 0 | Dura√ß√£o em minutos |
| topicos | text[] | nullable | T√≥picos estudados |
| observacoes | text | nullable | Observa√ß√µes |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

### üéØ M√≥dulo: Hiperfocos

#### `hiperfocos`
Per√≠odos de hiperfoco do usu√°rio.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| titulo | text | | T√≠tulo do hiperfoco |
| descricao | text | nullable | Descri√ß√£o |
| data_inicio | date | | Data de in√≠cio |
| data_fim | date | nullable | Data de fim |
| intensidade | integer | 1-5 (nullable) | Intensidade |
| status | text | padr√£o: 'ativo' | ativo/pausado/concluido |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 3

---

#### `hiperfoco_tarefas`
Tarefas e subtarefas de hiperfocos.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| hiperfoco_id | uuid | FK ‚Üí hiperfocos |
| user_id | uuid | FK ‚Üí auth.users |
| texto | text | Texto da tarefa |
| concluida | boolean | Se est√° conclu√≠da (padr√£o: false) |
| tarefa_pai_id | uuid | FK ‚Üí hiperfoco_tarefas (nullable, para subtarefas) |
| ordem | integer | Ordem de exibi√ß√£o (padr√£o: 0) |
| cor | text | Cor da tarefa (nullable) |
| created_at | timestamptz | Data de cria√ß√£o |
| updated_at | timestamptz | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 2

---

### ‚è±Ô∏è M√≥dulo: Produtividade

#### `pomodoro_sessoes`
Sess√µes de Pomodoro.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data da sess√£o |
| duracao_minutos | integer | | Dura√ß√£o |
| tipo | text | 'foco' ou 'pausa' | Tipo de sess√£o |
| tarefa | text | nullable | Tarefa relacionada |
| concluida | boolean | padr√£o: false | Se foi conclu√≠da |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

#### `prioridades`
Tarefas priorit√°rias di√°rias.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data |
| titulo | text | | T√≠tulo da tarefa |
| categoria | text | nullable | Categoria |
| nivel_prioridade | integer | 1-3 | N√≠vel de prioridade |
| concluida | boolean | padr√£o: false | Se est√° conclu√≠da |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 2

---

#### `blocos_tempo`
Blocos de tempo do dia.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| hora | text | | Hora do bloco |
| atividade | text | | Atividade |
| categoria | text | | inicio/alimentacao/estudos/saude/lazer/nenhuma |
| data | date | padr√£o: CURRENT_DATE | Data |
| created_at | timestamptz | | Data de cria√ß√£o |
| updated_at | timestamptz | | √öltima atualiza√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

### üéÆ M√≥dulo: Lazer e Autoconhecimento

#### `atividades`
Atividades de lazer, sa√∫de e sociais.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data da atividade |
| titulo | text | | T√≠tulo |
| categoria | text | | lazer/saude/social |
| duracao_minutos | integer | nullable | Dura√ß√£o |
| observacoes | text | nullable | Observa√ß√µes |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

#### `autoconhecimento_registros`
Registros de humor, energia e ansiedade.

| Coluna | Tipo | Restri√ß√µes | Descri√ß√£o |
|--------|------|------------|-----------|
| id | uuid | PK | |
| user_id | uuid | FK ‚Üí auth.users | |
| data | date | | Data |
| tipo | text | | humor/energia/ansiedade |
| nivel | integer | 1-5 | N√≠vel |
| gatilhos | text[] | nullable | Gatilhos identificados |
| observacoes | text | nullable | Observa√ß√µes |
| created_at | timestamptz | | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 0

---

### üç≥ M√≥dulo: Receitas

#### `receitas`
Receitas culin√°rias do usu√°rio.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| titulo | text | T√≠tulo da receita |
| ingredientes | jsonb | Ingredientes em JSON |
| modo_preparo | text | Modo de preparo |
| tempo_preparo_minutos | integer | Tempo de preparo (nullable) |
| porcoes | integer | N√∫mero de por√ß√µes (nullable) |
| categoria | text | Categoria (nullable) |
| foto_url | text | URL da foto (nullable) |
| favorita | boolean | Se √© favorita (padr√£o: false) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 1

---

#### `lista_compras`
Lista de compras do usu√°rio.

| Coluna | Tipo | Descri√ß√£o |
|--------|------|-----------|
| id | uuid | PK |
| user_id | uuid | FK ‚Üí auth.users |
| item | text | Nome do item |
| quantidade | text | Quantidade (nullable) |
| categoria | text | Categoria (nullable) |
| comprado | boolean | Se foi comprado (padr√£o: false) |
| created_at | timestamptz | Data de cria√ß√£o |

**RLS:** ‚úÖ Habilitado  
**Registros:** 3

---

## Relacionamentos

### Diagrama de Relacionamentos Principais

```
auth.users (2 usu√°rios)
    ‚îú‚îÄ‚îÄ users_profile (0)
    ‚îú‚îÄ‚îÄ preferencias_visuais (1)
    ‚îú‚îÄ‚îÄ metas_diarias (0)
    ‚îÇ
    ‚îú‚îÄ‚îÄ financas_categorias (16)
    ‚îÇ   ‚îú‚îÄ‚îÄ financas_transacoes (2)
    ‚îÇ   ‚îî‚îÄ‚îÄ financas_pagamentos_recorrentes (0)
    ‚îú‚îÄ‚îÄ financas_envelopes (1)
    ‚îÇ
    ‚îú‚îÄ‚îÄ alimentacao_refeicoes (2)
    ‚îú‚îÄ‚îÄ alimentacao_planejamento (1)
    ‚îú‚îÄ‚îÄ alimentacao_hidratacao (1)
    ‚îÇ
    ‚îú‚îÄ‚îÄ saude_medicamentos (1)
    ‚îÇ   ‚îî‚îÄ‚îÄ saude_tomadas_medicamentos (3)
    ‚îú‚îÄ‚îÄ saude_registros_humor (1)
    ‚îÇ
    ‚îú‚îÄ‚îÄ sono_registros (0)
    ‚îÇ
    ‚îú‚îÄ‚îÄ estudos_concursos (0)
    ‚îÇ   ‚îú‚îÄ‚îÄ estudos_questoes (0)
    ‚îÇ   ‚îî‚îÄ‚îÄ estudos_simulados (0)
    ‚îú‚îÄ‚îÄ estudos_registros (0)
    ‚îÇ
    ‚îú‚îÄ‚îÄ hiperfocos (3)
    ‚îÇ   ‚îî‚îÄ‚îÄ hiperfoco_tarefas (2)
    ‚îÇ       ‚îî‚îÄ‚îÄ hiperfoco_tarefas (subtarefas)
    ‚îÇ
    ‚îú‚îÄ‚îÄ pomodoro_sessoes (0)
    ‚îú‚îÄ‚îÄ prioridades (2)
    ‚îú‚îÄ‚îÄ blocos_tempo (1)
    ‚îÇ
    ‚îú‚îÄ‚îÄ atividades (0)
    ‚îú‚îÄ‚îÄ autoconhecimento_registros (0)
    ‚îÇ
    ‚îú‚îÄ‚îÄ receitas (1)
    ‚îî‚îÄ‚îÄ lista_compras (3)
```

---

## Pol√≠ticas RLS

**Todas as tabelas do schema `public` t√™m RLS habilitado.**

Isso significa que:
- ‚úÖ Cada usu√°rio s√≥ pode acessar seus pr√≥prios dados
- ‚úÖ Isolamento completo entre usu√°rios
- ‚úÖ Seguran√ßa em n√≠vel de linha

**Schemas com RLS:**
- ‚úÖ `auth.*` - RLS habilitado
- ‚úÖ `storage.*` - RLS habilitado  
- ‚úÖ `public.*` - RLS habilitado

---

## Migra√ß√µes Aplicadas

Total de migra√ß√µes: **23**

1. `20251018154636` - create_users_profile_table
2. `20251018154645` - create_preferencias_visuais_table
3. `20251018154655` - create_metas_diarias_table
4. `20251018154705` - create_financas_categorias_table
5. `20251018154717` - create_financas_transacoes_table
6. `20251018154727` - create_financas_envelopes_table
7. `20251018154739` - create_financas_pagamentos_recorrentes_table
8. `20251018154751` - create_alimentacao_refeicoes_table
9. `20251018154801` - create_sono_registros_table
10. `20251018154811` - create_autoconhecimento_registros_table
11. `20251018154821` - create_estudos_registros_table
12. `20251018154831` - create_estudos_concursos_table
13. `20251018154841` - create_estudos_questoes_table
14. `20251018154852` - create_estudos_simulados_table
15. `20251018154902` - create_hiperfocos_table
16. `20251018154910` - create_atividades_table
17. `20251018154920` - create_pomodoro_sessoes_table
18. `20251018154931` - create_prioridades_table
19. `20251018154941` - create_receitas_table
20. `20251018154949` - create_lista_compras_table
21. `20251018154959` - create_updated_at_triggers
22. `20251018155257` - fix_function_search_path
23. `20251018181527` - create_blocos_tempo_table

---

## Estat√≠sticas do Banco

- **Total de tabelas no schema public:** 28 tabelas
- **Total de registros:** ~40 registros distribu√≠dos
- **Usu√°rios cadastrados:** 2
- **Sess√µes ativas:** 7
- **Buckets de storage:** 1
- **Objetos armazenados:** 0

---

## Pr√≥ximos Passos Sugeridos

1. ‚úÖ Implementar pol√≠ticas RLS espec√≠ficas para cada tabela
2. ‚úÖ Configurar triggers para updated_at (j√° implementado)
3. ‚ö†Ô∏è Adicionar √≠ndices para otimiza√ß√£o de queries
4. ‚ö†Ô∏è Implementar soft delete onde necess√°rio
5. ‚ö†Ô∏è Adicionar auditoria de mudan√ßas cr√≠ticas
6. ‚ö†Ô∏è Configurar backup autom√°tico
7. ‚ö†Ô∏è Implementar valida√ß√µes adicionais via triggers

---

**Documento gerado automaticamente via MCP Supabase**
